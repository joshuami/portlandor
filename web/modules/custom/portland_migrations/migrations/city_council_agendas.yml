id: city_council_agendas
label: 'Migrate Legacy City Council Agendas with additional fields'
langcode: en
migration_group: city_council_agendas
source:
  plugin: csv
  path: modules/custom/portland_migrations/sources/council_agenda_docs.csv
  header_row_count: 1
  keys:
    - ID
process:
  uid:
    plugin: default_value
    default_value: 1
  title: AGENDA_TITLE  
  field_council_agenda_date_range/value:
    plugin: format_date
    from_timezone: America/Los_Angeles
    from_format: 'Y-m-d'
    to_format: 'm-d-Y'
    source: START_DATE
  field_council_agenda_date_range/end_value:
    plugin: format_date
    from_timezone: America/Los_Angeles
    from_format: 'Y-m-d'
    to_format: 'm-d-Y'
    source: END_DATE
  urls_temp:
    source: AGENDA
    plugin: explode
    delimiter: "|"
  field_city_council_agenda:
    plugin: sub_process
    source: "@urls_temp"
    process:
      title: "0"
      uri: "1"
destination:
  plugin: 'entity:node'
  default_bundle: council_agenda
